<!DOCTYPE html >
<html>
  <head>
    <meta charset="utf-8" >
    <title>Base de datos de libros</title>
    <style type="text/css">
        ol, ul { 
      list-style-type: none;
        }
    </style>
  <script>
    function ValidarFormulario() {
      let nombre = document.getElementById('nombre').value.trim();
      let marca = document.getElementById('marca').value;
      let modelo = document.getElementById('modelo').value.trim();
      let precio = parseFloat(document.getElementById('precio').value);
      let unidad = parseInt(document.getElementById('unidad').value);
      let detalles = document.getElementById('desc').value.trim();
      let imagen = document.getElementById('img').value.trim();
      let defaultImage = "IMG/imagenDefecto.png"; // Ruta por defecto
  
      // Validar nombre
      if (nombre === "" || nombre.length > 100) {
        alert("El nombre es requerido y debe tener 100 caracteres o menos.");
        return false;
      }
  
      // Validar marca
      if (marca === "") {
        alert("Debe seleccionar una marca.");
        return false;
      }
  
      // Validar modelo
      let modelPattern = /^[a-zA-Z0-9]+$/;
      if (modelo === "" || !modelPattern.test(modelo) || modelo.length > 25) {
        alert("El modelo es requerido, debe ser alfanumérico y tener 25 caracteres o menos.");
        return false;
      }
  
      // Validar precio
      if (isNaN(precio) || precio <= 99.99) {
        alert("El precio es requerido y debe ser mayor a 99.99.");
        return false;
      }
  
      // Validar unidades
      if (isNaN(unidad) || unidad < 0) {
        alert("Las unidades son requeridas y deben ser mayores o iguales a 0.");
        return false;
      }
  
      // Validar detalles
      if (detalles.length > 250) {
        alert("Los detalles deben tener 250 caracteres o menos.");
        return false;
      }
  
      // Validar imagen
      if (imagen === "") {
        imagen = defaultImage;
      }
  
      // Formulario válido
      return true;
    }
  
   // Ejecutar la validación en el submit del formulario
  document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('formLib').addEventListener('submit', function(event) {
      if (!ValidarFormulario()) {
        event.preventDefault(); // Prevenir el envío del formulario si la validación falla
      }
    });
  });
  </script>
  </head>

  <body>

    <h1 style="text-align: center">Registro de LIBROS</h1>

    <h2><p>A continuación ingrese los datos del del libro:</p></h2>
    <form action="http://localhost/tecweb/practicas/p10/set_producto_v2.php" method ="post" id="formLib">
        <fieldset>
            <legend><p>Información del Producto</p></legend>

            <ul>
            <li>Nombre del libro: <input type="text" name="nombre" id="nombre"> </li>
            <li>Marca del libro(Editorial): 
              <select name="marca" id="marca">
                <option value="acantilado">Acantilado</option>
                <option value="akal">Akal</option>
                <option value="aguilar">Aguilar</option>
                <option value="alba">Alba</option>
                <option value="alfaguara">Alfaguara</option>
                <option value="alianza">Alianza</option>
                <option value="almadia">Almadia</option>
                <option value="anagrama">Anagrama</option>
                <option value="atlanta">Atlanta</option>
                <option value="ariel">Ariel</option>
                <option value="austral">Austral</option>
                <option value="booket">Booket</option>
                <option value="cajanegra">Caja Negra</option>
                <option value="catedra">Catedra</option>
                <option value="critica">Critica</option>
                <option value="crossbooks">CrossBooks</option>
                <option value="cupula">Cúpula</option>
                <option value="debolsillo">Debolsillo</option>
                <option value="espasa">Espasa</option>
                <option value="destino">Ediciones Destino</option>
                <option value="paidos">Ediciones Paidos</option>
                <option value="escencia">Escencia</option>
                <option value="galaxia">Galaxia Gutenberg</option>
                <option value="gredos">Gredos</option>
                <option value="geoplaneta">GeoPlaneta</option>
                <option value="herder">Herder</option>
                <option value="impedi">Impedimenta</option>
                <option value="esfera">La esfera de los libros</option>
                <option value="lAmerica">Library of America</option>
                <option value="lumen">Lumen</option>
                <option value="disney">Libros Disney</option>
                <option value="minotauro">Minotauro</option>
                <option value="mte">Maxi Tusquets Editores</option>
                <option value="nevsky">Nevsky</option>
                <option value="novela">N de novela</option>
                <option value="olañeta">Olañeta</option>
                <option value="paidos">Paidos</option>
                <option value="penguin books">Penguin Books</option>
                <option value="planeta">Planeta</option>
                <option value="lector">Planeta Lector</option>
                <option value="peninsula">Peninsula</option>
                <option value="rm">RM</option>
                <option value="sajalin">Sajalin</option>
                <option value="salamandra">Salmandra</option>
                <option value="satori">Satori</option>
                <option value="sexto">Sexto Piso</option>
                <option value="siglo">Siglo XXI</option>
                <option value="siruela">Siruela</option>
                <option value="taschen">Taschen</option>
                <option value="taurus">Taurus</option>
                <option value="trotta">Trotta</option>
                <option value="te">Tusuqets Editores</option>
                <option value="urano">Urano</option>
                <option value="valdemar">Valdemar</option>
                <option value="zafiro">Zafiro</option>
              </select>
            </li>
            <li>Modelo: <input type="text" name="modelo" id="modelo"> </li>
            <li>Precio: <input type="number" step="any" name="precio" id="precio"> </li>
            <li>Unidades: <input type="number" name="unidad" min="0" id="unidad"> </li>
            <li>Descripción <br> 
            <textarea name="desc" id="desc" rows="4" cols="60" placeholder="Ejemplo: Color, tamaño, diseño, etc."></textarea>
            </li>
            <li>Imagen: <br>
                <textarea name="img" id="img" rows="4" cols="60" placeholder="Ingrese url de la Imagen: http://example.com/image.jpg"></textarea>
            </li>
            <img id="imagen" src="IMG/imagenDefecto.png" style="display: none;">
            </ul>
        </fieldset>
        <div style="text-align: center">
            <input type="submit" value="Agregar Producto"> 
            <input type="reset" value="Limpiar">
        </div>
    </form>
    <script>
        function validateURL() {
            var imageUrl = document.getElementById('img').value;
            var allowedExtensions = /\.(jpg|jpeg|png|gif)$/i;
        
            if (!allowedExtensions.test(imageUrl)) {
                alert('Por favor, ingresa una URL de una imagen con extensión .jpg, .jpeg, .png, o .gif.');
                return false;
            }
            
            return true;
        }
    </script>
  </body>
</html>
